<link rel="stylesheet" href="../styles/cart.css"><style>.close{width:100%;height:8.8vh;background:rgba(0,0,0,.6);position:fixed;left:0;bottom:11vh;font-size:3.8vw;color:#fff;display:flex;flex-direction:row}.close p:nth-child(1){width:20%;display:flex;flex-direction:row;margin-right:5vw}.close p:nth-child(1) input{width:3rem;height:3rem;margin:3vh 2vw 0 4vw}.close p:nth-child(1) span{display:block;margin-top:2.8vh}.close p:nth-child(2){width:50%;margin:1vh 0 0 0;font-size:4.2vw}.close p:nth-child(2) span{font-size:4vw;color:#ccc}.close p:nth-child(3){font-size:4.2vw;width:30%;height:6.5vh;background:#fa462d;text-align:center;padding-top:2.3vh}.clear{width:100%;height:8.8vh;position:fixed;left:0;bottom:11vh;font-size:3.8vw;color:#000;border-top:.1rem solid #ccc;display:none}.clear p:nth-child(1){float:left;width:20%;display:flex;flex-direction:row;margin-right:5vw}.clear p:nth-child(1) input{width:3rem;height:3rem;margin:3vh 2vw 0 4vw}.clear p:nth-child(1) span{display:block;margin-top:2.8vh}.clear p:nth-child(2){float:right}.clear button:nth-child(1){border:.1rem solid #aaa;background:#fff;font-size:4vw}.clear button:nth-child(2){border:0;background:#fa462d;color:#fff;font-size:4vw}.clear button{width:24vw;height:5vh;margin:2vh 3vw 0 0;border-radius:1rem}</style><div ng-app="myApp" ng-controller="myCtrl"><div class="headers"><p><a href="http://127.0.0.1/guoyao/dist/src/app/index.html#/category_7"><img src="../images/back.png"></a></p><p>购物车</p><p class="btn">编辑</p></div><dl ng-repeat="item in dataArr" class="article"><dt><p>商品编码：{{item.codes}}</p></dt><dd><input type="checkbox" class="ck" ng-model="item.check"> <img ng-src="{{item.picUrl}}"><p class="b">{{item.name}} <span>￥{{item.price}}</span></p><p class="n a">×{{item.num}}</p><p class="n no d"><button ng-click="reduce(item.id)">-</button><input type="text" ng-model="item.num" class="txt"><button ng-click="adds(item.id)">+</button></p></dd></dl><p ng-hide="dataArr.length" class="go">购物车内暂时没有商品 <a href="http://127.0.0.1/guoyao/dist/src/app/index.html#/home">去购物></a></p><div class="close"><p><input type="checkbox" ng-model="check" ng-click="clickFn()"><span>全选</span></p><p>合计：￥ {{sum()}}<br><span>立减：￥0.00</span></p><p>结算({{nums()}})</p></div><div class="clear"><p><input type="checkbox" ng-model="check" ng-click="clickFn()"><span>全选</span></p><p><button>移入收藏</button> <button ng-click="clearFn()">删除</button></p></div><div class="feet"><dl class="ft"><dt><a href="http://127.0.0.1/guoyao/dist/src/app/index.html#/home"><img src="../images/home.png"></a></dt><dd>首页</dd></dl><dl class="ft"><dt><a href="http://127.0.0.1/guoyao/dist/src/app/index.html#/category_list"><img src="../images/class.png"></a></dt><dd>分类</dd></dl><dl class="ft"><dt><a href="http://127.0.0.1/guoyao/dist/src/app/index.html#/mine"><img src="../images/mine.png"></a></dt><dd>我的</dd></dl><dl class="shop"><dt><img src="../images/shop.png"></dt><dd><span>{{nums()}}</span>件</dd></dl></div></div><script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js"></script><script src="../scripts/angular.js" charset="utf-8"></script><script>var app=angular.module("myApp",[]);app.controller("myCtrl",["$scope",function(a){a.dataArr=[];for(var r in localStorage)a.dataArr.push(JSON.parse(localStorage[r]));a.nums=function(){var r=0;return angular.forEach(a.dataArr,function(a){a.num&&(r+=parseInt(a.num))}),r},a.check=!0,a.sum=function(){return a.allPrice=0,angular.forEach(a.dataArr,function(r){1==r.check&&(a.allPrice+=r.num*r.price)}),a.allPrice},a.clickFn=function(){angular.forEach(a.dataArr,function(r){r.check=a.check})},a.adds=function(r){angular.forEach(a.dataArr,function(a){return a.id==r&&a.num++,a.num})},a.reduce=function(r){angular.forEach(a.dataArr,function(n,o){if(n.id==r&&(n.num--,n.num<1&&confirm("是否移除该商品"))){localStorage.removeItem(n.id),a.dataArr=[];for(var n in localStorage)a.dataArr.push(JSON.parse(localStorage[n]))}})},a.clearFn=function(){angular.forEach(a.dataArr,function(r){if(1==r.check){localStorage.removeItem(r.id),a.dataArr=[];for(var r in localStorage)a.dataArr.push(JSON.parse(localStorage[r]))}})}}]);var bol=!0;$(".btn").click(function(){return bol?($(".btn").html("完成"),$(".a").addClass("no").siblings().removeClass("no"),$(".close").hide(),$(".clear").show(),bol=!1):($(".btn").html("编辑"),$(".d").addClass("no").siblings().removeClass("no"),$(".close").show(),$(".clear").hide(),bol=!0)})</script>