<div ng-app="myApp" ng-controller="myCtrl"><link rel="stylesheet" href="../styles/shopmain.css"><div class="headers"><p><a href="http://127.0.0.1/guoyao/dist/src/app/index.html#/category_7"><img src="../images/back.png"></a></p><p>{{data.name}}</p><p class="but">...</p></div><ul class="navs"><li><a href="http://127.0.0.1/guoyao/dist/src/app/index.html#/home"><img src="../images/home(2).png"><span>首页</span></a></li><li><a href="http://127.0.0.1/guoyao/dist/src/app/index.html#/category_list"><img src="../images/class(2).png"><span>分类</span></a></li><li><a href="http://127.0.0.1/guoyao/dist/src/app/views/cart.html"><img src="../images/shop.png"><span>购物车</span></a></li><li><a href="http://127.0.0.1/guoyao/dist/src/app/index.html#/mine"><img src="../images/mine(2).png"><span>我的</span></a></li></ul><div class="main"><dl><dt><img ng-src="{{data.picture}}"></dt><dd class="name">{{data.name}}</dd><dd class="title">{{data.title}}</dd><dd class="money">￥{{data.sellPrice}}</dd></dl><p class="list"><span class="curs">商品详情</span> <span>说明书</span></p><ul><li class="nn">{{data.name}}</li><li style="text-align:center"><img ng-src="{{data.picture}}"></li></ul></div><div class="feeter"><dl class="ft"><dt><img src="../images/phone.png"></dt><dd>电话咨询</dd></dl><dl class="ft"><dt><img src="../images/service.png"></dt><dd>客服</dd></dl><dl class="ft"><dt><img src="../images/like.png"></dt><dd>收藏</dd></dl><dl class="ft shop" ng-click="cart()"><dt><img src="../images/shop.png"></dt><dd>购物车</dd><span class="num">{{nums()}}</span></dl><p class="add">加入购物车</p></div><div id="car"><dl><dt><img ng-src="{{data.picture}}"><p class="b">{{data.name}} <span>￥{{data.sellPrice}}</span></p></dt><dd>数量： <button ng-click="reduce()">-</button><input type="text" size="5" ng-model="data.num" ng-keyup="keyup()"><button ng-click="adds()">+</button></dd></dl><p class="gwc" ng-click="add($event)">加入购物车</p></div></div><script src="../scripts/angular.js"></script><script src="http://libs.baidu.com/jquery/2.0.0/jquery.min.js" charset="utf-8"></script><script>function findParam(a){var t=a.split("=")[1];return t}var app=angular.module("myApp",[]);app.controller("myCtrl",["$scope","$http",function(a,t){var n=findParam(window.location.search);t.get("http://127.0.0.1/guoyao/src/app/views/shopmain.php?comId="+n).then(function(t){a.data=t.data,a.data.num=1,a.adds=function(){return a.data.num++,a.data.num},a.reduce=function(t){return a.data.num--,a.data.num<1&&(a.data.num=1),a.data.num}}),a.add=function(t){if(t.stopPropagation(),localStorage[a.data.id]){var n=JSON.parse(localStorage[a.data.id]);n.num+=a.data.num,localStorage[a.data.id]=JSON.stringify(n)}else{var r={name:a.data.name,picUrl:a.data.picture,price:a.data.sellPrice,codes:a.data.code,num:a.data.num,id:a.data.id,check:!0};localStorage[a.data.id]=JSON.stringify(r),console.log(a.data.code)}},a.cart=function(){window.location.href="http://127.0.0.1/guoyao/dist/src/app/views/cart.html"},a.dataArr=[];for(var r in localStorage)a.dataArr.push(JSON.parse(localStorage[r]));a.nums=function(){var t=0;return angular.forEach(a.dataArr,function(a){a.num&&(t+=parseInt(a.num))}),t}}])</script><script>$(".but").click(function(){"none"==$(".navs").css("display")?$(".navs").show():$(".navs").hide()}),$(".list>span").click(function(){$(this).addClass("curs").siblings().removeClass("curs")}),$(".add").click(function(){$("#car").show()}),$(".gwc").click(function(){$("#car").hide()})</script>